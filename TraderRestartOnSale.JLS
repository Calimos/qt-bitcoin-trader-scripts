[JLScript]
Version=1
Name=TraderRestartOnSale
Notes=
Encrypted=false
LogRowsCount=100
Data="var variablePath = \"D:\\\\Damjan\\\\Qsync\\\\Bitcoin\\\\QT Bitcoin Trader\\\\QTBitcointTrader\\\\\";\nvar lastTradeStatusFile = variablePath + \"lastTradeStatusFile.txt\";\n\nemptyLogFiles();\n///////////////\t\tlog to file or window\t\t///////////////////\nvar logToFile = true;\nvar logToWindow = true;\nvar logFile = variablePath + \"TraderRestartOnSaleLogger.txt\";\n\nfunction eventLogger(tempString) {\n    if (logToFile)\n        trader.fileAppend(logFile, trader.dateTimeString() + \": \" + tempString);\n    if (logToWindow)\n        trader.log(tempString);\n}\n///////////////////////////////////////////////////////////////////\n\nvar currencyPrimary = \"BTC\";\nvar currencySecondary = \"ETH\";\n\nfunction restartEverything() {\n\n    var scriptName = \"restartEverything()\";\n    eventLogger(scriptName + \".START\");\n\n    eventLogger(scriptName + \".Restart Trader & TraderMain & TraderMainRestart\");\n    trader.groupStop(\"TraderMain\");\n    trader.groupStop(\"Trader\");\n    trader.groupStop(\"TraderMainRestart\");\n    trader.cancelBids(currencySecondary + currencyPrimary);\n    trader.groupStart(\"TraderMainRestart\");\n\n    trader.fileWrite(lastTradeStatusFile, \"SELL\");\n    eventLogger(scriptName + \".SELL\");\n\n    eventLogger(scriptName + \".END\");\n}\n\n\ntrader.on(\"LastMyBuyPrice\").changed()\n{\n    var scriptName = \"trader.on(LastMyBuyPrice).changed()\";\n    eventLogger(scriptName + \".START\");\n\n    trader.fileWrite(lastTradeStatusFile, \"BUY\");\n    eventLogger(scriptName + \".BUY\");\n\n     eventLogger(scriptName + \".END\");\n}\n\n\ntrader.on(\"LastMySellPrice\").changed() {    \n    var scriptName = \"trader.on(LastMySellPrice).changed()\";\n    eventLogger(scriptName + \".START\");\n\n    trader.delay(5,\"restartEverything()\");\n    eventLogger(scriptName + \".END\");\n}\n\n\nfunction emptyLogFiles() {\n    trader.fileWrite(lastTradeStatusFile, \"SELL\");\n    eventLogger(\"SELL\");    \n    var emptyLogFile = \"\";\n    emptyLogFile = variablePath + \"TraderLogger.txt\";\n    trader.fileWrite(emptyLogFile, \"\");\n    emptyLogFile = variablePath + \"TraderMainLogger.txt\";\n    trader.fileWrite(emptyLogFile, \"\");\n    emptyLogFile = variablePath + \"TraderMainRestartLogger.txt\";\n    trader.fileWrite(emptyLogFile, \"\");\n    emptyLogFile = variablePath + \"TraderLastBuyLogger.txt\";\n    trader.fileWrite(emptyLogFile, \"\");\n    emptyLogFile = variablePath + \"TraderRestartOnSaleLogger.txt\";\n    trader.fileWrite(emptyLogFile, \"\");\n}"
